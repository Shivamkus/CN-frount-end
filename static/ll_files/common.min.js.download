define(["jquery"],(function($){var common={};let intrestPayload,intrestToken;common.sendPageView=function(id="",headline="",section="",author="",isPremium="false"){var parms={};parms=""==id?{hitType:"pageview",location:window.location.hostname.trim(),title:headline.trim(),page:window.location.pathname.trim(),dimension15:headline}:{hitType:"pageview",location:window.location.hostname.trim(),title:headline.trim(),page:window.location.pathname.trim(),dimension15:headline,dimension47:isPremium,dimension48:id},ga("send",parms),pSUPERFLY.virtualPage({sections:section,authors:author,path:window.location.pathname.trim(),title:headline}),"undefined"!=typeof COMSCORE&&void 0!==COMSCORE.beacon&&COMSCORE.beacon({c1:"2",c2:"6035286"})},common.trackNewRelic=function(url){let i;newrelic.interaction().save()},common.getLocation=function(callback){$.ajax({url:"https://www.hindustantimes.com/resources/img/hindustantimes_notification_logo.png",type:"HEAD",success:callback})},common.getCookie=function(e){for(var a=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var o=t[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(a))return o.substring(a.length,o.length)}return null},common.setCookie=function(e,t,a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var o="expires="+i.toGMTString();document.cookie=e+"="+t+";"+o+";domain=.hindustantimes.com;path=/"},common.trackWebEngageEvents=function(eventName,evntObj){"undefined"!=typeof webengage&&webengage.track(eventName,evntObj)},common.gaSubTrackingEvent=function(eventName,planName,planType,eventData){try{ga("set",eventData),"paywall_viewed"==planName?ga("send","event",eventName,planName,planType,{nonInteraction:1}):ga("send","event",eventName,planName,planType)}catch(e){}},common.getUrlParam=function(name){const urlParams=new URLSearchParams(window.location.search),myParam=urlParams.get(name);return myParam};var hours12=function(date){let hour=(date.getHours()+24)%12||12;return hour<10?"0"+hour:hour};common.getFormatedDateForQuickRead=function(date){var dt=new Date(date),formatedDate="",ampm=dt.getHours()>=12?"PM":"AM";let day=dt.getDate()<10?"0"+dt.getDate():dt.getDate(),minute=dt.getMinutes()<10?"0"+dt.getMinutes():dt.getMinutes();var sortMonths;return formatedDate=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][dt.getMonth()]+" "+day+", "+hours12(dt)+":"+minute+" "+ampm+" IST"},common.getInterestData=function(callback=Function()){$.ajax({url:"https://www.hindustantimes.com/static-content/1y/interest_v1.json",dataType:"json",type:"GET",success:function(res){callback(res)}})},common.addUserFollowData=function(payLoad,token){showToastMsg("add",payLoad),$.ajax({url:"https://accounts.hindustantimes.com/v2/user/interest",type:"POST",data:payLoad,contentType:"application/json",dataType:"json",beforeSend:function(xhr){xhr.setRequestHeader("Authorization",token),xhr.setRequestHeader("Referrer","HT"),xhr.setRequestHeader("X-Client","1023")}})},common.getUserInterestData=function(clientId,token,callback){$.ajax({url:"https://accounts.hindustantimes.com/v2/user/interest?ref=HT&user_id="+clientId,type:"GET",contentType:"application/json",dataType:"json",beforeSend:function(xhr){xhr.setRequestHeader("Authorization",token),xhr.setRequestHeader("X-Client","1023")},success:function(res){callback(res)}})},common.removeUserFollowData=function(payLoad,token){intrestPayload=payLoad,intrestToken=token,showToastMsg("remove",payLoad),$.ajax({url:"https://accounts.hindustantimes.com/v2/user/interest",type:"DELETE",data:payLoad,contentType:"application/json",dataType:"json",beforeSend:function(xhr){xhr.setRequestHeader("Authorization",token),xhr.setRequestHeader("Referrer","HT"),xhr.setRequestHeader("X-Client","1023")}})};let showToastMsg=function(action,payLoad){let data=JSON.parse(payLoad),isSection=$("#toasts").data("section")||!1,msgtxt="",msgHtml="";data.interest.topics.length>0?msgtxt="Topic":data.interest.cities.length>0?msgtxt="City":data.interest.authors.length>0&&(msgtxt="Author"),"add"==action?(msgHtml=msgtxt+" added successfully",isSection&&(msgHtml+="<a href='/personalized-content-listing'>VIEW FOLLOWING</a>")):"remove"==action&&(msgHtml=isSection?msgtxt+" removed successfully<a id='undo-section'>UNDO</a>":msgtxt+" removed successfully<a id='undo-follow'>UNDO</a>"),$("#toasts").show();let newToast=document.createElement("div");$(newToast).addClass("toast-following show"),$(newToast).html(msgHtml),$("#toasts").html(newToast),setTimeout((function(){$(newToast).removeClass("show"),$(newToast).addClass("showOut"),$(newToast).remove()}),3e3)};function change_date_show_format(ms,oldDate,prifixText){try{const days=Math.floor(ms/864e5),daysms=ms%864e5,hours=Math.floor(daysms/36e5),hoursms=ms%36e5,minutes=Math.floor(hoursms/6e4),minutesms=ms%6e4,sec=Math.floor(minutesms/1e3);return days>0&&days<2?prifixText+" "+days+" day ago":days>0?prifixText+" "+days+" days ago":hours>0&&hours<2?prifixText+" "+hours+" hour ago":hours>0?prifixText+" "+hours+" hours ago":minutes<2?prifixText+" "+minutes+" min ago":prifixText+" "+minutes+" mins ago"}catch{return oldDate}}return common.getSectionStories=function(url,callback){$.ajax({url:url,type:"GET",contentType:"application/json",dataType:"json",success:callback})},common.getAuthorTwitterLinks=function(article){if(null==article||null==article.metadata)return"";let authorList=article.metadata.authorsList,twitterLinks="";return null!=authorList&&authorList.forEach(author=>{if(null!=author.twitterUrl){let twitterUrl=author.twitterUrl.split("/")[author.twitterUrl.split("/").length-1];""!=twitterUrl&&(twitterLinks="@"+twitterUrl,authorList.length>1&&(twitterLinks+=" "))}}),twitterLinks},common.initSlider=function(){try{var instance=$(".htsWrapper");$.each(instance,(function(key,value){var htsarrows=$(instance[key]).find(".arrow"),prevArrow=htsarrows.filter(".arrow-prev"),nextArrow=htsarrows.filter(".arrow-next"),htsbox=$(instance[key]).find(".hts"),htsboxitem=htsbox.find("li").width(),x=0,mx=0,maxScrollWidth=htsbox[0].scrollWidth-htsbox[0].clientWidth/2-htsbox.width()/2;function toggleArrows(){htsbox.scrollLeft()>maxScrollWidth-10?nextArrow.addClass("disabled"):htsbox.scrollLeft()<10?prevArrow.addClass("disabled"):(prevArrow.removeClass("disabled"),nextArrow.removeClass("disabled"))}$(htsarrows).on("click",(function(){$(this).hasClass("arrow-next")?(x=htsboxitem+htsbox.scrollLeft()+20,$(instance).parent().parent().hasClass("quick__reads__collection")&&0==htsbox.scrollLeft()&&(x+=128),htsbox.animate({scrollLeft:x})):(x=htsboxitem-htsbox.scrollLeft()-20,htsbox.animate({scrollLeft:-x}))})),$(htsbox).on({mousemove:function(e){var mx2=e.pageX-this.offsetLeft;mx&&(this.scrollLeft=this.sx+mx-mx2)},mousedown:function(e){this.sx=this.scrollLeft,mx=e.pageX-this.offsetLeft},scroll:function(){toggleArrows()}}),$(document).on("mouseup",(function(){mx=0}))}))}catch{}},common.fireEcommTracking=function(widgetName,pageType,placementNumber,pageUrl,promotions){console.log("Ecomm Tracking");var wName=widgetName;if(wName=(wName=wName.toLowerCase()).replaceAll(" ","_"),""!=pageType){var pType=pageType;wName=wName+"_"+(pType=(pType=pType.toLowerCase()).replaceAll(" ","_"))}var Obj_event="promoView",Obj_widgetName=wName=wName.replace(" ","_"),Obj_pageType=pType,Obj_placementNumber=placementNumber,Obj_pageUrl=pageUrl,Obj_ecommerce={promoView:{promotions:promotions}}},common.update_Date_Format=function(){$(".dateTime").map((function(index,elm){if(!$(elm).is(".storyPage, .noTimeAgo")){var dt=elm.innerHTML;if(null!=elm.getAttribute("title")&&(elm.getAttribute("title").indexOf("Published")>-1||elm.getAttribute("title").indexOf("Updated")>-1)&&(dt=elm.getAttribute("title")),-1==dt.indexOf("ago")){var prifix_Text="";prifix_Text=dt.trim().indexOf("Published on")>-1?"Published":"Updated";let dt1=dt.trim().replace("Published on","").trim().replace("Updated on","").trim().replace("IST","").trim();var date1=new Date(dt1),date2,milli_secs;let returnDate=change_date_show_format((new Date).getTime()-date1.getTime(),dt,prifix_Text);elm.innerHTML=returnDate}}}))},common.getScoreCardUrl=function(liveData,type){var matchID=liveData.matchdetail.match.code,matchNumber="";"undefined"!=liveData.matchdetail.match.number&&""!=liveData.matchdetail.match.number&&(matchNumber=(matchNumber=liveData.matchdetail.match.number).toLowerCase().trim().replace(/ /g,"-").replace(/,/g,"").replace("/","-").replace(/:/g,"-"));var matchType="";"undefined"!=liveData.matchdetail.match.type&&""!=liveData.matchdetail.match.type&&(matchType="-"+(matchType=liveData.matchdetail.match.type).toLowerCase().trim().replace(/ /g,"-").replace(/,/g,"").replace("/","-").replace(/:/g,"-"));var seriesShortName="";"undefined"!=liveData.seriesshortname&&""!=liveData.seriesshortname&&(seriesShortName=(seriesShortName=liveData.seriesshortname).toLowerCase().trim().replace(/ /g,"-").replace(/,/g,"").replace("/","-").replace(/:/g,"-")+"-");var team_Home=liveData.matchdetail.team_Home==liveData.teamlist[0].team_Id?liveData.teamlist[0].name_Full:liveData.teamlist[1].name_Full,team_Away=liveData.matchdetail.team_Away==liveData.teamlist[0].team_Id?liveData.teamlist[0].name_Full:liveData.teamlist[1].name_Full,team_Home_Short=liveData.matchdetail.team_Home==liveData.teamlist[0].team_Id?liveData.teamlist[0].name_Short:liveData.teamlist[1].name_Short,team_Away_Short=liveData.matchdetail.team_Away==liveData.teamlist[0].team_Id?liveData.teamlist[0].name_Short:liveData.teamlist[1].name_Short,team_Home_Slug=team_Home.toLowerCase().trim().replace(/ /g,"-"),team_Away_Slug=team_Away.toLowerCase().trim().replace(/ /g,"-"),team_Home_Short_Slug=team_Home_Short.toLowerCase().trim().replace(/ /g,"-"),team_Away_Short_Slug=team_Away_Short.toLowerCase().trim().replace(/ /g,"-");let scoreCardURL="https://www.hindustantimes.com/cricket/live-scorecard-"+team_Home_Short_Slug+"-vs-"+team_Away_Short_Slug+"-"+seriesShortName+matchNumber+"-"+team_Home_Slug+"-vs-"+team_Away_Slug+matchType+"-live-score-"+matchID+"/";return"result"==type&&(scoreCardURL="https://www.hindustantimes.com/cricket/match-result-"+team_Home_Short_Slug+"-vs-"+team_Away_Short_Slug+"-"+seriesShortName+matchNumber+"-"+team_Home_Slug+"-vs-"+team_Away_Slug+matchType+"-"+matchID+"/"),scoreCardURL},common}));