define(["common","jqueryui","env","ads"],(function(common,jqueryui,env,ads){var rightLeftZone={},dapTrackerImpList={},af=0;function addDapAmazonImpressionTracking(storyElem,onTabSelection=!1){$(storyElem).length&&$(storyElem).isInViewport()&&(onTabSelection||0==af)&&(dapTracker.track("shopWidgetImp",dapTrackerImpList,"event"),af=1)}function updateAffUrlParameter(url,param,value){if(void 0!==value&&"undefined"!=value&&""!=value){var regex=new RegExp("("+param+"=)[^&]+");return url.replace(regex,"$1"+value)}return url}function getRightZone(showPhotos,showVideos){let url="";url=showPhotos&&showVideos?apiBaseUrl+"api/collections?ids="+env.zoneId.photos+","+env.zoneId.shopnow+","+env.zoneId.trendingnews+","+env.zoneId.videos:showVideos?apiBaseUrl+"api/collections?ids="+env.zoneId.shopnow+","+env.zoneId.trendingnews+","+env.zoneId.videos:showPhotos?apiBaseUrl+"api/collections?ids="+env.zoneId.photos+","+env.zoneId.shopnow+","+env.zoneId.trendingnews:apiBaseUrl+"api/collections?ids="+env.zoneId.shopnow+","+env.zoneId.trendingnews,$.ajax({url:url,dataType:"json",success:function(data){data.forEach((function(elm){let header="",viewLink="",divTitle=elm.title.toLowerCase().replace(" ","");divTitle.toLowerCase().includes("photo")?divTitle="photos":divTitle.toLowerCase().includes("video")&&(divTitle="latestvideos");let divId="div"+divTitle.toLowerCase().replace(" ","")+"Right";if(header=elm.title,viewLink=elm.metadata.externalUrl||"",null!=elm.listCollectionStories&&bindRightZone(header,viewLink,divId,elm.listCollectionStories),"embed"==elm.type){let divId;bindRightZoneEmbed(header,viewLink,"div"+elm.embed.title.toLowerCase().replace(" ","")+"Right",elm.embed)}})),adFree||ads.getRightZoneAds()}})}function getRightZone_HomePage(url){$.ajax({url:url,dataType:"json",success:function(data){data.forEach((function(elm){let header="",viewLink="",divTitle=elm.title.toLowerCase().replace(" ","");divTitle.toLowerCase().includes("photo")?divTitle="photos":divTitle.toLowerCase().includes("video")&&(divTitle="latestvideos");let divId="div"+divTitle.toLowerCase().replace(" ","")+"Right";if(header=elm.title,viewLink=elm.metadata.externalUrl||"",null!=elm.listCollectionStories&&bindRightZone(header,viewLink,divId,elm.listCollectionStories),"embed"==elm.type){let divId;bindRightZoneEmbed(header,viewLink,"div"+elm.embed.title.toLowerCase().replace(" ","")+"Right",elm.embed)}}))}})}function getRightZone_MostPopular(){$.ajax({url:"https://personalize.hindustantimes.com/popular-story?propertyId=ht&articleType=story&platformId=web&numStories=5",dataType:"json",success:function(data){bindRightZone_Mostpopular(data.items)}})}function getRightZone_MostPopularNew(){let mostPopularUrl=apiBaseUrl+"api/app/homenew/sectionfeed/v2/mostPopular?size=5",numOfStories=13,apiBase="https://personalize.hindustantimes.com/trending-stories-section?propertyId=ht&platformId=web",id=$("#dataHolder").data("story-id"),section=$("#dataHolder").data("story-section"),subsection=$("#dataHolder").data("story-subsection");section=section.toLowerCase().replace(/ /g,"-"),subsection=subsection.toLowerCase().replace(/ /g,"-"),section&&subsection?("cities"!=section||subsection.includes("-news")||(subsection+="-news"),mostPopularUrl=apiBase+"&sectionName="+section+"&subSectionName="+section+"@"+subsection+"&numStories=13"):section&&(mostPopularUrl=apiBase+"&sectionName="+section+"&numStories=13"),$.ajax({url:mostPopularUrl,dataType:"json",success:function(data){let dataItems=data.items;id&&(dataItems=data.items.filter(article=>article.storyId!=id),dataItems.length>=12&&(dataItems=dataItems.slice(8,12))),bindRightZone_MostpopularNew(dataItems)}})}function bindLeftZone_Latest(mydata){let divId="divLatestNews",orderId=$("#"+divId).attr("placementIndex");var leftData="<div class='lftNews'>";leftData+="<h2 class='secHdg htImpressionTrackingTop' data-vars-page-type='LHS'  data-vars-widget-name='Latest News' data-vars-placement-number='"+orderId+"'>",leftData+="<span class='hdgTexure'></span>",leftData+="<span class='hdgStyle'>",leftData+="<span>[</span>Latest News<span>]</span>",leftData+="</span>",leftData+="</h2>",leftData+='<div class="htImpressionTracking">',$(mydata).each((function(i,data){if(i<4){var story_url=data.websiteURL,story_headline=data.headLine,img_src="",top_class="",section_name=data.section;0==i?(""==(img_src=data.wallpaperLarge||"")&&(img_src="https://images.hindustantimes.com/default/257x145.jpg"),top_class="row cartView"):(""==(img_src=data.mediumRes||"")&&(img_src="https://images.hindustantimes.com/default/257x145.jpg"),top_class="row listing"),leftData+="<div class='row track' data-vars-storyid='"+data.itemId+"' + data-vars-orderid='"+(i+1)+"' + data-vars-story-url='"+data.websiteURL+"'>",leftData+="<div class='catName pt10'><a href='/"+section_name+"'>"+section_name+"</a></div>",leftData+="<h3 class='hdg3'><a href='"+story_url+"'>"+story_headline+"</a></h3>",leftData+="<div class='dateTime' title='Published on "+getFormatedDate(data.publishedDate)+"'>Published on "+getFormatedDateNew(data.publishedDate)+"</div>",leftData+="</div>"}})),leftData+="<div class='viewAllLink track' data-vars-storyid='' data-vars-orderid='View All' data-vars-story-url='/latest-news'>",leftData+="<a href='/latest-news' class='view'>",leftData+="<span>View All</span></a>",leftData+="</div>",leftData+="</div>",leftData+="</div>",$("#"+divId).html(leftData),common.update_Date_Format()}function getFormatedDateNew(date){var dt=new Date(date),formatedDate="",ampm=dt.getHours()>=12?"PM":"AM";let day=dt.getDate()<10?"0"+dt.getDate():dt.getDate(),minute=dt.getMinutes()<10?"0"+dt.getMinutes():dt.getMinutes();var sortMonths;return formatedDate=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][dt.getMonth()]+" "+day+" "+hours12(dt)+":"+minute+" "+ampm+" IST"}function hours12(date){let hour=(date.getHours()+24)%12||12;return hour<10?"0"+hour:hour}function bindRightZone_Mostpopular(mydata){if(mydata.length>0){let divId="divMostPopularRight",orderId=$("#"+divId).attr("placementIndex"),header="Most Popular",viewLink="https://www.hindustantimes.com/mostpopular",rightData="<div class='rgtWidget'>";rightData+="<div class='secHdg htImpressionTrackingTop' data-vars-page-type='RHS' data-vars-widget-name='"+header+"' data-vars-placement-number='"+orderId+"'>",rightData+="<span class='hdgTexure'></span>",rightData+="<span class='hdgStyle'>",rightData+="<span>[</span><h2 class='secHdg'>"+header+"</h2><span>]</span>",rightData+="</span>",rightData+="</div>",rightData+='<div class="htImpressionTracking">',$(mydata).each((function(i,data){if(i<4){let itemId=data.storyId;var story_url=data.storyURL,story_headline=data.headline,img_src="",top_class="";0==i?(""==(img_src=data.imageObject.fullImage||"")&&(img_src="https://images.hindustantimes.com/default/257x145.jpg"),top_class="row cartView"):(""==(img_src=data.imageObject["257x145"]||"")&&(img_src="https://images.hindustantimes.com/default/257x145.jpg"),top_class="row listing"),rightData+="<div class='"+top_class+" track' data-vars-storyid='"+itemId+"' + data-vars-orderid='"+(i+1)+"' + data-vars-story-url='"+story_url+"'>",rightData+="<h3 class='hdg3'><a href='"+story_url+"'>"+story_headline+"</a></h3>",rightData+="<figure><span>",rightData+="<a href='"+story_url+"'>",rightData+="<span><img src='"+img_src+"'/></span>",rightData+="</a></span></figure>",rightData+="</div>"}})),rightData+="<div class='viewAllLink track' data-vars-storyid='' data-vars-orderid='View All' data-vars-story-url='"+viewLink+"'>",rightData+="<a href='"+viewLink+"' class='view'>",rightData+="<span>View All</span></a>",rightData+="</div>",rightData+="</div>",rightData+="</div>",$("#"+divId).html(rightData)}}function bindRightZone_MostpopularNew(mydata){if(mydata.length){let divId="divMostPopularRight",orderId=$("#"+divId).attr("placementIndex"),header="Most Popular",viewLink="https://www.hindustantimes.com/mostpopular",rightData="<div class='rgtWidget'>";rightData+="<div class='secHdg htImpressionTrackingTop' data-vars-page-type='RHS' data-vars-widget-name='"+header+"' data-vars-placement-number='"+orderId+"'>",rightData+="<span class='hdgTexure'></span>",rightData+="<span class='hdgStyle'>",rightData+="<span>[</span><h2 class='secHdg'>"+header+"</h2><span>]</span>",rightData+="</span>",rightData+="</div>",rightData+='<div class="htImpressionTracking">',$(mydata).each((function(i,data){if(i<4){let itemId=data.storyId;var story_url=data.storyURL,story_headline=data.headline,img_src="",top_class="";0==i?(""==(img_src=data.imageObject.bigImage||"")&&(img_src="https://images.hindustantimes.com/default/257x145.jpg"),top_class="row cartView"):(""==(img_src=data.imageObject.thumbnailImage||"")&&(img_src="https://images.hindustantimes.com/default/257x145.jpg"),top_class="row listing"),rightData+="<div class='"+top_class+" track' data-vars-storyid='"+itemId+"' + data-vars-orderid='"+(i+1)+"' + data-vars-story-url='"+story_url+"'>",rightData+="<h3 class='hdg3'><a href='"+story_url+"'>"+story_headline+"</a></h3>",rightData+="<figure><span>",rightData+="<a href='"+story_url+"'>",rightData+="<span><img src='"+img_src+"'/></span>",rightData+="</a></span></figure>",rightData+="</div>"}})),rightData+="<div class='viewAllLink track' data-vars-storyid='' data-vars-orderid='View All' data-vars-story-url='"+viewLink+"'>",rightData+="<a href='"+viewLink+"' class='view'>",rightData+="<span>View All</span></a>",rightData+="</div>",rightData+="</div>",rightData+="</div>",$("#"+divId).html(rightData)}}function bindRightZone(header,viewLink,divId,mydata){let startIndex=0,maxIndex=4;"yes"===env.zoneId.isHomePage&&("divphotosRight"==divId?(startIndex=5,maxIndex=9,header="IN PICS"):"divmustwatchRight"==divId?header="MUST WATCH":"divtrendingRight"==divId&&(startIndex=5,maxIndex=9,header="IT'S VIRAL"));let orderId=$("#"+divId).attr("placementIndex");var rightData="<div class='rgtWidget'>";let moreLink="/"+viewLink;rightData+="<div class='secHdg htImpressionTrackingTop' data-vars-widget-name='"+header+"' data-vars-placement-number='"+orderId+"'>",rightData+="<span class='hdgTexure'></span>",rightData+="<span class='hdgStyle'>",rightData+="<span>[</span><h2 class='secHdg'>"+header+"</h2><span>]</span>",rightData+="</span>",rightData+="</div>",rightData+='<div class="htImpressionTracking">';let target="";$(mydata).each((function(i,data){if(i>=startIndex&&i<maxIndex){var section_name=data.metadata.section,section_url=data.metadata.sectionUrl;null!=data.metadata.subSection&&""!=data.metadata.subSection.trim()&&(section_name=data.metadata.subSection,section_url=data.metadata.subSectionUrl);var story_url=data.metadata.url;"ht bangla"==header.toLowerCase()&&(story_url="https://bangla.hindustantimes.com"+data.metadata.url,target="target='_blank'",moreLink=viewLink);var story_headline=data.mobileHeadline.replace(/<(.|\n)*?>/g,""),img_src="",top_class="",type_class="";i==startIndex?(data.leadMedia.image&&""==(img_src=data.leadMedia.image.images.fullImage||"")&&(img_src=data.leadMedia.image.images.thumbnailImage||""),""==img_src&&(img_src="https://images.hindustantimes.com/default/257x145.jpg"),"gallery"==data.type?(top_class="row cartView photoStory",type_class="<small class='pIcon'>"+data.elements.length+"</small>"):"video"==data.type?(top_class="row cartView videoStory large",type_class="<small class='vIcon'></small>"):top_class="row cartView"):(data.leadMedia.image&&""==(img_src=data.leadMedia.image.images["148x111"]||"")&&(img_src=data.leadMedia.image.images.thumbnailImage||""),""==img_src&&(img_src="https://images.hindustantimes.com/default/257x145.jpg"),"gallery"==data.type?(top_class="row listing photoStory",type_class="<small class='pIcon'>"+data.elements.length+"</small>"):"video"==data.type?(top_class="row listing videoStory",type_class="<small class='vIcon'></small>"):top_class="row listing"),rightData+="<div class='"+top_class+" track' data-vars-storyid='"+data.id+"' data-vars-orderid='"+(i+1)+"' + data-vars-story-url='"+story_url+"'>",rightData+="<h3 class='hdg3'><a href='"+story_url+"' "+target+">"+story_headline+"</a></h3>",rightData+="<figure><span>",rightData+="<a href='"+story_url+"' "+target+">",rightData+="<span><img src='"+img_src+"'/></span></a>",rightData+=type_class,rightData+="</a></span></figure>",rightData+="</div>"}})),rightData+="<div>",rightData+="<div class='viewAllLink'>",rightData+="<a href='"+moreLink+"' class='view' "+target+">",rightData+="<span>View All</span></a>",rightData+="</div>",rightData+="</div>",rightData+="</div>",$("#"+divId).html(rightData)}function bindRightZoneEmbed(header,viewLink,divId,mydata){try{let orderId=$("#"+divId).attr("placementIndex");var rightData="<div class='rgtWidget'>";let moreLink="/"+viewLink;rightData+="<div class='secHdg htImpressionTrackingTop' data-vars-widget-name='"+header+"' data-vars-placement-number='"+orderId+"'>",rightData+="<span class='hdgTexure'></span>",rightData+="<span class='hdgStyle'>",rightData+="<span>[</span><h2 class='secHdg'>"+mydata.title+"</h2><span>]</span>",rightData+="</span>",rightData+="</div>",rightData+=mydata.body,rightData+="</div>",$("#"+divId).html(rightData);try{rightLeftZone.getAmazonAffilaiteShopNowDetails()}catch{}}catch{}}function getRightZone_HtPremium(){$.ajax({url:apiBaseUrl+"api/app/homenew/sectionfeed/v2/premium?size=5",dataType:"json",success:function(data){bindRightZone_HtPremium(data)}})}function bindRightZone_HtPremium(mydata){if(mydata.content.sectionItems.length){let divId="divsubscriptionRight",orderId=$("#divsubscriptionRight").attr("placementIndex"),header="HT Premium",viewLink="https://www.hindustantimes.com/ht-exclusive",rightData="<div class='rgtWidget htPremium'>";rightData+="<div class='secHdg htImpressionTrackingTop' data-vars-page-type='RHS' data-vars-widget-name='"+header+"' data-vars-placement-number='"+orderId+"'>",rightData+="<span class='hdgTexure'></span>",rightData+="<span class='hdgStyle'>",rightData+="<span>[</span><h2 class='secHdg'>"+header+"</h2><span>]</span>",rightData+="</span>",rightData+="</div>",rightData+='<div class="htImpressionTracking">',$(mydata.content.sectionItems).each((function(i,data){if(i<5){let itemId=data.itemId;var story_url=data.websiteURL,story_headline=data.headLine,img_src="",top_class="";0==i?(""==(img_src=data.mediumRes||"")&&(img_src="https://images.hindustantimes.com/default/257x145.jpg"),top_class="row cartView"):(""==(img_src=data.thumbImage||"")&&(img_src="https://images.hindustantimes.com/default/257x145.jpg"),top_class="row listing"),rightData+="<div class='"+top_class+" track' data-vars-storyid='"+itemId+"' + data-vars-orderid='"+(i+1)+"' + data-vars-story-url='"+story_url+"'>",rightData+="<h3 class='hdg3'><a href='"+story_url+"'>"+story_headline+"</a></h3>",rightData+="<figure class='htPremLavel'><span>",rightData+="<a href='"+story_url+"'>",rightData+="<span><img src='"+img_src+"'/></span>",rightData+="</a></span></figure>",rightData+="</div>"}})),rightData+="<div class='viewAllLink track' data-vars-storyid='' data-vars-orderid='View All' data-vars-story-url='"+viewLink+"'>",rightData+="<a href='"+viewLink+"' class='view'>",rightData+="<span>VIEW ALL</span></a>",rightData+="</div>",rightData+="</div>",rightData+="</div>",$("#divsubscriptionRight").html(rightData)}}function isStoryUpdated(firstPubDate,lastPubDate){var fdt=new Date(firstPubDate),ldt=new Date(lastPubDate);return fdt.getTime()===ldt.getTime()}function bindLeftZone(header,viewLink,divId,mydata){var leftData="<div class='lftNews'>";let orderId=$("#"+divId).attr("placementIndex");leftData+="divTrendingTopic"==divId?"<h2 class='secHdg'>":"<h2 class='secHdg htImpressionTrackingTop' data-vars-widget-name='"+header.replace("'","")+"' data-vars-placement-number='"+orderId+"'>",leftData+="<span class='hdgTexure'></span>",leftData+="<span class='hdgStyle'>",leftData+="<span>[</span>"+header+"<span>]</span>",leftData+="</span>",leftData+="</h2>","divTrendingTopic"==divId?(leftData+="<div class='main-trend-topics'>",leftData+="<div class='trend-topics'>",$(mydata).each((function(i,data){leftData+="<a href='"+data.value+"'>"+data.key+"</a>"})),leftData+="</div></div>"):(leftData+='<div class="htImpressionTracking">',$(mydata).each((function(i,data){if(i<4){var section_name=data.metadata.section,section_url=data.metadata.sectionUrl;null!=data.metadata.subSection&&""!=data.metadata.subSection.trim()&&(section_name=data.metadata.subSection,section_url=data.metadata.subSectionUrl);var story_url=data.metadata.url,story_headline=data.mobileHeadline;leftData+="<div class='row track' data-vars-storyid='"+data.id+"' + data-vars-orderid='"+(i+1)+"' + data-vars-story-url='"+data.metadata.url+"'>","yes"!=env.zoneId.isHomePage&&(leftData+="<div class='catName pt10'><a href='"+section_url+"'>"+section_name+"</a></div>"),leftData+="<h3 class='hdg3'><a href='"+story_url+"'>"+story_headline+"</a></h3>",isStoryUpdated(data.firstPublishedDate,data.lastPublishedDate)?leftData+="<div class='dateTime' title='Published on "+getFormatedDate(data.lastModifiedDate)+"'>Published on "+getFormatedDateNew(data.lastModifiedDate)+"</div>":leftData+="<div class='dateTime' title='Updated on "+getFormatedDate(data.lastModifiedDate)+"'>Updated on "+getFormatedDateNew(data.lastModifiedDate)+"</div>",leftData+="</div>"}})),null!=viewLink&&(leftData+="<div class='viewAllLink track' data-vars-storyid='' data-vars-orderid='View All' data-vars-story-url='/"+viewLink+"'>",leftData+="<a href='/"+viewLink+"' class='view'>",leftData+="<span>View All</span></a>",leftData+="</div>")),leftData+="</div>",leftData+="</div>",$("#"+divId).html(leftData),common.update_Date_Format()}function getRHSPhotoFromPersonalization(divid){var contentHtml="";let promotions=[],numOfStories=9,apiUrl="https://personalize.hindustantimes.com/trending-stories-section?propertyId=ht&platformId=web&sectionName=photos&subSectionName=photos@entertainment&numStories=50";$.ajax({url:apiUrl,dataType:"json",type:"GET",success:function(res){if(res.items&&res.items.length>0){var widgetTitle="Trending Photos",widgetTitleeDisplay="true";contentHtml+="<div class='rgtWidget'>",contentHtml+="<div class='secHdg' >",contentHtml+="<span class='hdgTexure'></span>",contentHtml+="<span class='hdgStyle'>",contentHtml+="<span>[</span>Trending Photos<span>]</span>",contentHtml+="</span>",contentHtml+="</div>",contentHtml+="<div class='htImpressionTracking'>",res.items.forEach((function(elm,index){var cssName="listing";0==index&&(cssName="cartView");let headline=elm.headline.replace(/<(.|\n)*?>/g,"");if(index<5){let promoItems={},id=elm.storyId,orderId=index+1,storyUrl=elm.storyURL;promoItems.id=id,promoItems.name="trending_photos_listing_rhs",promoItems.creative=storyUrl,promoItems.position=orderId,promotions.push(promoItems),contentHtml+="<div class='row "+cssName+" photoStory track' data-vars-storyid='' data-vars-orderid='51' data-vars-story-url=''>",contentHtml+="<h3 class='hdg3'><a href='"+storyUrl+"'>"+elm.headline+" </a></h3>",contentHtml+="<figure>",contentHtml+="<span>",contentHtml+="<a href='"+storyUrl+"'>";var image_550x309="";try{image_550x309=elm.imageObject["550x309"]}catch(exp){}contentHtml+="<img src='"+image_550x309+"' title='"+headline+"' alt='"+headline+"'>",contentHtml+="<small class='pIcon'>"+elm.imageCount+"</small>",contentHtml+="</a>",contentHtml+="</span>",contentHtml+="</figure>",contentHtml+="</div>"}})),contentHtml+="</div>",$("#"+divid).empty(),$("#"+divid).html(contentHtml)}let currentUrl=window.location.href;common.fireEcommTracking("trending_photos","Listing RHS","1",currentUrl,promotions)}})}function getRHSVideosFromPersonalization(divid){var contentHtml="";let promotions=[],numOfStories=9,apiUrl="https://personalize.hindustantimes.com/trending-stories-section?propertyId=ht&platformId=web&sectionName=videos&subSectionName=videos@entertainment&numStories=50";$.ajax({url:apiUrl,dataType:"json",type:"GET",success:function(res){if(res.items&&res.items.length>0){var widgetTitle="Trending Videos",widgetTitleeDisplay="true";contentHtml+="<div class='rgtWidget'>","true"=="true".trim()&&(contentHtml+="<div class='secHdg' >",contentHtml+="<span class='hdgTexure'></span>",contentHtml+="<span class='hdgStyle'>",contentHtml+="<span>[</span>Trending Videos<span>]</span>",contentHtml+="</span>",contentHtml+="</div>"),contentHtml+="<div class='htImpressionTracking'>",res.items.forEach((function(elm,index){var cssName="listing";0==index&&(cssName="cartView");let headline=elm.headline.replace(/<(.|\n)*?>/g,"");if(index<5){let promoItems={},id=elm.storyId,orderId=index+1,storyUrl=elm.storyURL;promoItems.id=id,promoItems.name="trending_videos_rhs",promoItems.creative=storyUrl,promoItems.position=orderId,promotions.push(promoItems),contentHtml+="<div class='row "+cssName+" videoStory track' data-vars-storyid='' data-vars-orderid='51' data-vars-story-url=''>",contentHtml+="<h3 class='hdg3'><a href='"+storyUrl+"'>"+elm.headline+" </a></h3>",contentHtml+="<figure>",contentHtml+="<span>",contentHtml+="<a href='"+storyUrl+"'>";var image_550x309="";try{image_550x309=elm.imageObject["550x309"]}catch(exp){}contentHtml+="<img src='"+image_550x309+"' title='"+headline+"' alt='"+headline+"'>",contentHtml+="<small class='vIcon'></small>",contentHtml+="</a>",contentHtml+="</span>",contentHtml+="</figure>",contentHtml+="</div>"}})),contentHtml+="</div>",$("#"+divid).empty(),$("#"+divid).html(contentHtml)}let currentUrl=window.location.href;common.fireEcommTracking("trending_videos_rhs","Listing - RHS","1",currentUrl,promotions)}})}function getAmazonWidgetCall(divid,keywords,searchIndex,minPrice,maxPrice,widgetName,trackingId,minSavingPercent,offerCount,numberOfItems,showHeader=!0,rhsWidget=!1,link="/shop-now",isTabSelection=!1){var contentHtml="",storiesId="",moreApi="https://affliate-api.hindustantimes.com/api/amazon/search",payload=JSON.stringify({Keywords:keywords,SearchIndex:searchIndex,MinPrice:minPrice,MaxPrice:maxPrice,MinSavingPercent:minSavingPercent,OfferCount:offerCount,Marketplace:"www.amazon.in",Resources:["Offers.Listings.Price","ItemInfo.Title","Images.Primary.Medium","Offers.Listings.Promotions","ItemInfo.ManufactureInfo","ItemInfo.ProductInfo"]}),sName="";"undefined"!=typeof sectionName?"homenew"==(sName=sectionName)&&(sName="home"):sName="Home",sName=searchIndex,searchIndex&&keywords?sName="Best Deals":"HealthPersonalCare"==searchIndex&&(sName="Health And Beauty"),dapTrackerImpList.pageURL=window.location.href,dapTrackerImpList.wName=widgetName,dapTrackerImpList.category=sName,$.ajax({url:moreApi,type:"POST",data:payload,contentType:"application/json",dataType:"json",success:function(res){var resLength;res.SearchResult.Items.length>0&&(showHeader&&(contentHtml+="<div class='htsWrapper'>",contentHtml+="<div class='htsHeader'>",contentHtml+="<div class='hdg2'>"+widgetName+"</div>",contentHtml+="<div class='htsArrows'><a class='arrow arrow-prev disabled'></a><a class='arrow arrow-next'></a> </div>",contentHtml+="</div>"),rhsWidget?(contentHtml+="<div class='htImpressionTrackingTop' data-vars-page-type='RHS' data-vars-widget-name='"+widgetName+"' data-vars-placement-number='1'></div>",contentHtml+=getAmazonAffilaiteRHSHTML(res,trackingId,widgetName,sName,numberOfItems,link)):(contentHtml+="<div class='htImpressionTrackingTop' data-vars-widget-name='"+widgetName+"' data-vars-placement-number='1'></div>",contentHtml+=getAmazonAffilaiteHTML(res,trackingId,widgetName,sName,numberOfItems))),$("#"+divid).html(contentHtml),dapTrackerImpList.products=dapPName,dapTrackerImpList.productIds=dapPIds,isTabSelection&&dapTracker.track("shopWidgetImp",dapTrackerImpList,"event"),dapClickAamzonTracking(),common.initSlider()},error:function(response){}})}function getAmazonAffilaiteRHSHTML(res,trackingId,widgetName,sName,numberOfItems,link){let contentHtml="";return dapPName="",dapPIds="",contentHtml+="<div class='updates htImpressionTracking'>",res.SearchResult.Items.forEach((function(elm,index){if(null==numberOfItems||index<numberOfItems)try{var detailURL=updateAffUrlParameter(elm.DetailPageURL,"tag",trackingId);contentHtml+="<div class='row listing track' data-vars-storyid="+elm.ASIN+" data-vars-orderid="+(index+1)+" data-vars-story-url="+elm.DetailPageURL+">",contentHtml+="<div class='dealsBox'>",contentHtml+="<div class='product-img'>",contentHtml+="<a target='_blank' onclick=\"ga('set','dimension49','"+widgetName+"');ga('set','dimension50','Amazon');ga('set','dimension51','"+elm.ItemInfo.Title.DisplayValue+"');\" href='"+detailURL+"' rel='noopener nofollow noreferrer sponsored'>",contentHtml+="<img src='"+elm.Images.Primary.Medium.URL+"' alt='"+elm.ItemInfo.Title.DisplayValue+"' />",contentHtml+="</a>";try{contentHtml+="<div class='offBox'>"+elm.Offers.Listings[0].Price.Savings.Percentage+"% OFF</div>"}catch(err){}contentHtml+="</div>",contentHtml+="<div class='product-details'>",contentHtml+="<p>"+elm.ItemInfo.Title.DisplayValue+"</p>";try{var mrp=elm.Offers.Listings[0].Price.Amount+elm.Offers.Listings[0].Price.Savings.Amount;contentHtml+="<div class='amazon-price'>Rs. "+Math.round(elm.Offers.Listings[0].Price.Amount)+" <span>Rs. "+Math.round(mrp)+"</span></div>"}catch(err){contentHtml+="<div class='amazon-price'>Rs. NA <span>Rs. NA</span></div>"}contentHtml+="<div class='actionDiv'>",contentHtml+="<a target='_blank' onclick=\"ga('set','dimension49','"+widgetName+"');ga('set','dimension50','Amazon');ga('set','dimension51','"+elm.ItemInfo.Title.DisplayValue+"');\" href='"+detailURL+"' rel='noopener nofollow noreferrer sponsored'>",contentHtml+="<img src='https://images.hindustantimes.com/images/app-images/2021/10/amazon-logo.png' alt='"+elm.ItemInfo.Title.DisplayValue+"'>",contentHtml+="</a>";let price=null!=elm.Offers&&elm.Offers.Listings.length>0?elm.Offers.Listings[0].Price.Amount:"NA";contentHtml+="<a target='_blank' onclick=\"ga('set','dimension49','"+widgetName+"');ga('set','dimension50','Amazon');ga('set','dimension51','"+elm.ItemInfo.Title.DisplayValue+"');ga('send','event','"+sName+"_Affiliate_Widget','"+(index+1)+"','"+detailURL+"');\" href='"+detailURL+"'  data.widgetname = '"+widgetName+"'  data.sname = '"+sName+"'  data.pname = '"+elm.ItemInfo.Title.DisplayValue+"'  data.pamount = '"+price+"'  data.asin = '"+elm.ASIN+"'  href='"+detailURL+"' class='btn shopnow-btn' rel='noopener nofollow noreferrer sponsored'>buy now</a>",contentHtml+="</div>",contentHtml+="</div>",contentHtml+="</div>",contentHtml+="</div>",dapPName+=elm.ItemInfo.Title.DisplayValue.replaceAll(",","")+",",dapPIds+=elm.ASIN+","}catch(err){}})),contentHtml+="</div>",contentHtml+="</div>",contentHtml+="<div class='htImpressionTracking'>",contentHtml+="<div class='viewAllLink track' data-vars-storyid='viewAllLink_amazon' data-vars-orderid='EXPLORE MORE DEALS'  data-vars-story-url="+link+">",contentHtml+="<span class='exploreMoreDeals'><a target='_blank' href="+link+"> EXPLORE MORE DEALS</a></span>",contentHtml+="</div>",contentHtml+="</div>",contentHtml}function dapClickAamzonTracking(){$(".shopnow-btn").each((function(i,el){$(el).click((function(){var eventList={};eventList.pageURL=window.location.href,eventList.wName=$(this).attr("data.widgetname"),eventList.category=$(this).attr("data.sname"),eventList.product=$(this).attr("data.pname"),eventList.price=$(this).attr("data.pamount"),eventList.productId=$(this).attr("data.asin"),dapTracker.track("shopBuyClick",eventList,"event")}))}))}function getExploreMoreDealsLink(shopNowId,link){let contentHtml="";contentHtml+="<div class='htsWrapperShopNow'>",contentHtml+="<div class='htsHeader'>",contentHtml+="<div class='hdg2'>Shop Now",contentHtml+="<span class='exploreMoreDeals'><a target='_blank' href="+link+"> EXPLORE MORE DEALS</a></span>",contentHtml+="</div>",contentHtml+="</div>",$(shopNowId).prepend(contentHtml)}function shopNowTabs(){$(".tab-nav ul li").each((function(i,elm){$(elm).click((function(e){$(".tab-nav ul li").removeClass("active"),$(this).addClass("active");let currentTab=$(this).find("span"),keywords=$(currentTab).data("keywords")||null,searchIndex=$(currentTab).data("search-index"),minPrice=$(currentTab).data("min-price"),maxPrice=$(currentTab).data("max-price"),minSavingPercent=$(currentTab).data("min-saving-percent")||null,offerCount=$(currentTab).data("offer-count")||null,trackId=$(currentTab).data("track-id"),link=$(currentTab).data("link"),parentElm=$(elm).parent().parent().parent().parent(),id,showShopNowRHS;$(parentElm).find(".exploreMoreDeals").find("a").attr("href",link),getAmazonWidgetCall($(parentElm).find(".affilaite-widget").attr("id"),keywords,searchIndex,minPrice,maxPrice,"Shop Now",trackId,minSavingPercent,offerCount,4,!1,$(parentElm).hasClass("affiliateStoryShopNowRHS"),link,!0)}))}))}rightLeftZone.fireAffiliateImpressionTracking=function(){addDapAmazonImpressionTracking($("#amazonAffilaiteId")),addDapAmazonImpressionTracking($(".affiliateStoryShopNowRHS"))},rightLeftZone.getLeftZone=function(collection_type,zone){var header="",viewLink="",divId="",apiId="";let apiUrl="";"top_news"==collection_type?(divId="divTopNews",apiId=env.zoneId.topnews):"dont_miss"==collection_type?(divId="divDontMiss",apiId=env.zoneId.dontmiss):"trending_topic"==collection_type&&(divId="divTrendingTopic",apiId=env.zoneId.trendingtopic),apiUrl=apiBaseUrl+"api/collections/"+apiId,"latest_news"==collection_type&&(divId="divLatestNews",apiId=env.zoneId.latestnews,apiUrl=apiBaseUrl+"api/app/homenew/sectionfeed/v2/latest?size=5"),$.ajax({url:apiUrl,dataType:"json",success:function(data){"divLatestNews"==divId?bindLeftZone_Latest(data.content.sectionItems):(header=data.title,viewLink=null!=data.metadata?data.metadata.externalUrl:"","left"==zone&&bindLeftZone(header,viewLink,divId,"divTrendingTopic"==divId?data.trending:data.listCollectionStories))}})},rightLeftZone.bindRightPanel=function(){if("no"===env.zoneId.isHomePage){try{rightLeftZone.getLeftZone("top_news","left")}catch{}try{rightLeftZone.getLeftZone("dont_miss","left")}catch{}try{rightLeftZone.getLeftZone("trending_topic","left")}catch{}try{rightLeftZone.getLeftZone("latest_news","left")}catch{}}try{let showPhotos=!0,showVideos=!0;"mostpopularPhotos"==env.zoneId.photos&&(getRHSPhotoFromPersonalization("divphotosRight"),showPhotos=!1),"mostpopularVideos"==env.zoneId.videos&&(getRHSVideosFromPersonalization("divlatestvideosRight"),showVideos=!1),"yes"===env.zoneId.isHomePage?(getRightZone_HtPremium(),getRightZone_HomePage(apiBaseUrl+"api/collections?ids=101633085539873"),getRightZone_HomePage(apiBaseUrl+"api/collections?ids=101633599912715"),getRightZone_HomePage(apiBaseUrl+"api/collections?ids=101606719759208"),getRightZone_HomePage(apiBaseUrl+"api/collections?ids=101654153994159"),adFree||ads.getRightZoneAds()):getRightZone(showPhotos,showVideos)}catch{}try{let section=$("#dataHolder").data("story-section");section&&"entertainment"==section.toLowerCase()?getRightZone_MostPopularNew():getRightZone_MostPopular()}catch{}try{$("#divbanglaRight").length>0&&getExternalWidget("https://bangla.hindustantimes.com/api/cms/search/story?search=id:31646721865236")}catch{}try{$("#divhindustanRight").length>0&&getExternalWidget("https://images1.livehindustan.com/jsondata/ht_pramukh_khabhar.json")}catch{}},rightLeftZone.getAmazonAffilaiteShopNowDetails=function(){let shopNowId=$(".affiliateStoryShopNow"),shopNowIdRHS=$(".affiliateStoryShopNowRHS");($(shopNowId).length>0||$(shopNowIdRHS).length>0)&&($(shopNowId).each((function(i,elm){if(!$(elm).is(":hidden")){let id;getExploreMoreDealsLink(elm,"https://www.hindustantimes.com/shop-now"),shopNowTabs(),getAmazonWidgetCall($(elm).find(".htSlider").attr("id"),"mobile","Electronics","1000000","10000000","Shop Now","ht_homepage-21",10,3,4,!1,!1)}})),$(shopNowIdRHS).each((function(i,elm){if(!$(elm).is(":hidden")){let id;shopNowTabs(),getAmazonWidgetCall($(elm).find(".affilaite-widget").attr("id"),"mobile","Electronics","1000000","10000000","Shop Now","ht_homepage-21",10,3,4,!1,!0)}})))},rightLeftZone.getAmazonAffilaiteDetails=function(){if($("#amazonAffilaiteId").length>0){var keywords=$("#amazonAffilaiteId").attr("data-keywords"),searchIndex=$("#amazonAffilaiteId").attr("data-searchindex"),minPrice=$("#amazonAffilaiteId").attr("data-minprice"),maxPrice=$("#amazonAffilaiteId").attr("data-maxprice"),widgetName=$("#amazonAffilaiteId").attr("data-WidgetName"),trackingId="";""!=$("#amazonAffilaiteId").attr("data-TrackingId")&&(trackingId=$("#amazonAffilaiteId").attr("data-TrackingId")),getAmazonWidgetCall("amazonAffilaiteId",keywords,searchIndex,minPrice,maxPrice,widgetName,trackingId,null,null)}},rightLeftZone.getAmazonAffilaiteLifeStyleDetails=function(){$("#affiliateStory").length>0&&getAmazonWidgetCall("affiliateStory","smartphones","Electronics","1000000","15000000","Top Mobile Deals","ht-lifestyle-articlepage-slider-21",null,null)},rightLeftZone.initSlider=function(){try{var instance=$(".htsWrapper");$.each(instance,(function(key,value){var htsarrows=$(instance[key]).find(".arrow"),prevArrow=htsarrows.filter(".arrow-prev"),nextArrow=htsarrows.filter(".arrow-next"),htsbox=$(instance[key]).find(".hts"),htsboxitem=htsbox.find("li").width(),x=0,mx=0,maxScrollWidth=htsbox[0].scrollWidth-htsbox[0].clientWidth/2-htsbox.width()/2;function toggleArrows(){htsbox.scrollLeft()>maxScrollWidth-10?nextArrow.addClass("disabled"):htsbox.scrollLeft()<10?prevArrow.addClass("disabled"):(prevArrow.removeClass("disabled"),nextArrow.removeClass("disabled"))}$(htsarrows).on("click",(function(){$(this).hasClass("arrow-next")?(x=htsboxitem+htsbox.scrollLeft()+20,$(instance).parent().parent().hasClass("quick__reads__collection")&&0==htsbox.scrollLeft()&&(x+=128),htsbox.animate({scrollLeft:x})):(x=htsboxitem-htsbox.scrollLeft()-20,htsbox.animate({scrollLeft:-x}))})),$(htsbox).on({mousemove:function(e){var mx2=e.pageX-this.offsetLeft;mx&&(this.scrollLeft=this.sx+mx-mx2)},mousedown:function(e){this.sx=this.scrollLeft,mx=e.pageX-this.offsetLeft},scroll:function(){toggleArrows()}}),$(document).on("mouseup",(function(){mx=0}))}))}catch{}};var dapPName="",dapPIds="";function getAmazonAffilaiteHTML(res,trackingId,widgetName,sName,numberOfItems){let contentHtml="";return dapPName="",dapPIds="",contentHtml+="<ul class='hts htImpressionTracking'>",res.SearchResult.Items.forEach((function(elm,index){if(null==numberOfItems||index<numberOfItems)try{var detailURL=updateAffUrlParameter(elm.DetailPageURL,"tag",trackingId);contentHtml+="<li class='track' data-vars-storyid="+elm.ASIN+" data-vars-orderid="+(index+1)+" data-vars-story-url="+elm.DetailPageURL+">",contentHtml+="<figure>",contentHtml+="<a target='_blank' onclick=\"ga('set','dimension49','"+widgetName+"');ga('set','dimension50','Amazon');ga('set','dimension51','"+elm.ItemInfo.Title.DisplayValue+"');\" href='"+detailURL+"' rel='noopener nofollow noreferrer sponsored'>",contentHtml+="<img src='"+elm.Images.Primary.Medium.URL+"' alt='"+elm.ItemInfo.Title.DisplayValue+"' />",contentHtml+="</a>";try{contentHtml+="<div class='offBox'>"+elm.Offers.Listings[0].Price.Savings.Percentage+"% OFF</div>"}catch(err){}contentHtml+="</figure>",contentHtml+="<p>"+elm.ItemInfo.Title.DisplayValue+"</p>";try{var mrp=elm.Offers.Listings[0].Price.Amount+elm.Offers.Listings[0].Price.Savings.Amount;contentHtml+="<div class='amazon-price'>Rs. "+Math.round(elm.Offers.Listings[0].Price.Amount)+" <span>Rs. "+Math.round(mrp)+"</span></div>"}catch(err){contentHtml+="<div class='amazon-price'>Rs. "+Math.round(elm.Offers.Listings[0].Price.Amount)+"</div>"}contentHtml+="<div class='actionDiv'>",contentHtml+="<a target='_blank' onclick=\"ga('set','dimension49','"+widgetName+"');ga('set','dimension50','Amazon');ga('set','dimension51','"+elm.ItemInfo.Title.DisplayValue+"');\" href='"+detailURL+"' rel='noopener nofollow noreferrer sponsored'>",contentHtml+="<img src='https://images.hindustantimes.com/images/app-images/2021/10/amazon-logo.png' alt='"+elm.ItemInfo.Title.DisplayValue+"'>",contentHtml+="</a>",contentHtml+="<a target='_blank' onclick=\"ga('set','dimension49','"+widgetName+"');ga('set','dimension50','Amazon');ga('set','dimension51','"+elm.ItemInfo.Title.DisplayValue+"');ga('send','event','"+sName+"_Affiliate_Widget','"+(index+1)+"','"+detailURL+"');\" data.widgetname = '"+widgetName+"'  data.sname = '"+sName+"'  data.pname = '"+elm.ItemInfo.Title.DisplayValue+"'  data.pamount = '"+elm.Offers.Listings[0].Price.Amount+"'  data.asin = '"+elm.ASIN+"'  href='"+detailURL+"' class='btn shopnow-btn' rel='noopener nofollow noreferrer sponsored'>buy now</a>",contentHtml+="</div>",contentHtml+="</li>",dapPName+=elm.ItemInfo.Title.DisplayValue.replaceAll(",","")+",",dapPIds+=elm.ASIN+","}catch(err){}})),contentHtml+="</ul>",contentHtml+="</div>",contentHtml}function getFormatedDate(date){var dt=new Date(date),formatedDate="",ampm=dt.getHours()>=12?"PM":"AM";let day=dt.getDate()<10?"0"+dt.getDate():dt.getDate(),minute=dt.getMinutes()<10?"0"+dt.getMinutes():dt.getMinutes();var sortMonths;return formatedDate=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][dt.getMonth()]+" "+day+", "+dt.getFullYear()+" "+hours12(dt)+":"+minute+" "+ampm+" IST"}return rightLeftZone}));